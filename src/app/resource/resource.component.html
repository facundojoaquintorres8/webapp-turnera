<div class="m-sm-1">
  <div class="card">
    <div class="card-header bg-dark text-white">
      <h1 class="card-title">
        <button *hasPermission="['resources.write']" type="button" [routerLink]="['new']" class="btn btn-primary btn-icon"
          title="Crear Recurso">
          <i class="bi bi-plus-lg"></i>
        </button> Recursos
      </h1>
    </div>
    <div class="card-body">
        <app-filter [filterInputs]="filterInputs" [myForm]="myForm" (submit)="getItems()" (clear)="clear()"></app-filter>

        <app-table [headers]="headers" [bodyTemplate]="customBody" [myForm]="myForm" [sort]="sort" [hasButtons]="true"
          [filterInputs]="filterInputs" [queryItems]="query" #tableComponent>
      
          <ng-template #customBody let-items>
            <tr *ngFor="let resource of items">
              <td>{{ resource.description }}</td>
              <td>{{ resource.code ? resource.code : '-' }}</td>
              <td>
                <ng-content *ngFor="let resourceType of resource.resourcesTypes">
                  <div>
                    {{ resourceType.description }}
                  </div>
                </ng-content>
              </td>
              <td>
                <i *ngIf="resource.active" class="bi bi-check-square text-success"></i>
                <i *ngIf="!resource.active" class="bi bi-square text-danger outline"></i>
              </td>
              <td class="text-end">
                <button *hasPermission="['resources.read']" type="button" [routerLink]="[resource.id, 'view']"
                  class="btn btn-info btn-icon ms-1" title="Ver">
                  <i class="bi bi-eye"></i>
                </button>
      
                <button *hasPermission="['resources.write']" type="button" [routerLink]="[resource.id, 'edit']"
                  class="btn btn-primary btn-icon ms-1" title="Editar">
                  <i class="bi bi-pencil"></i>
                </button>
      
                <button *hasPermission="['resources.delete']" type="button" (click)="delete(resource)"
                  class="btn btn-danger btn-icon ms-1" title="Eliminar">
                  <i class="bi bi-trash"></i>
                </button>
              </td>
            </tr>
          </ng-template>
      
        </app-table>
    </div>
  </div>
</div>
